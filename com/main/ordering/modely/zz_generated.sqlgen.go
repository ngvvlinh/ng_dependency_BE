// +build !generator

// Code generated by generator sqlgen. DO NOT EDIT.

package modely

import (
	"database/sql"
	"sync"

	orderingmodel "etop.vn/backend/com/main/ordering/model"
	shippingmodel "etop.vn/backend/com/main/shipping/model"
	cmsql "etop.vn/backend/pkg/common/sql/cmsql"
	core "etop.vn/backend/pkg/common/sql/sq/core"
)

var __sqlModels []interface{ SQLVerifySchema(db *cmsql.Database) }
var __sqlonce sync.Once

func SQLVerifySchema(db *cmsql.Database) {
	__sqlonce.Do(func() {
		for _, m := range __sqlModels {
			m.SQLVerifySchema(db)
		}
	})
}

type SQLWriter = core.SQLWriter

type OrderExtendeds []*OrderExtended

func (m *OrderExtended) SQLTableName() string  { return "order" }
func (m *OrderExtendeds) SQLTableName() string { return "order" }

func (m *OrderExtended) SQLScan(opts core.Opts, row *sql.Row) error {
	return row.Scan(m.SQLScanArgs(opts)...)
}

func (ms *OrderExtendeds) SQLScan(opts core.Opts, rows *sql.Rows) error {
	res := make(OrderExtendeds, 0, 128)
	for rows.Next() {
		m := new(OrderExtended)
		args := m.SQLScanArgs(opts)
		if err := rows.Scan(args...); err != nil {
			return err
		}
		res = append(res, m)
	}
	if err := rows.Err(); err != nil {
		return err
	}
	*ms = res
	return nil
}

func (m *OrderExtended) SQLSelect(w SQLWriter) error {
	(*OrderExtended)(nil).__sqlSelect(w)
	w.WriteByte(' ')
	(*OrderExtended)(nil).__sqlJoin(w)
	return nil
}

func (m *OrderExtendeds) SQLSelect(w SQLWriter) error {
	return (*OrderExtended)(nil).SQLSelect(w)
}

func (m *OrderExtended) SQLJoin(w SQLWriter) error {
	m.__sqlJoin(w)
	return nil
}

func (m *OrderExtendeds) SQLJoin(w SQLWriter) error {
	return (*OrderExtended)(nil).SQLJoin(w)
}

func (m *OrderExtended) __sqlSelect(w SQLWriter) {
	w.WriteRawString("SELECT ")
	core.WriteCols(w, "order", (*orderingmodel.Order)(nil).SQLListCols())
	w.WriteByte(',')
	core.WriteCols(w, "f", (*shippingmodel.Fulfillment)(nil).SQLListCols())
}

func (m *OrderExtended) __sqlJoin(w SQLWriter) {
	w.WriteRawString("FROM ")
	w.WriteName("order")
	w.WriteRawString(" AS order")
	w.WriteRawString(" LEFT JOIN ")
	w.WriteName((*shippingmodel.Fulfillment)(nil).SQLTableName())
	w.WriteRawString(" AS f ON")
	w.WriteQueryString(" \"order\".id = f.order_id")
}

func (m *OrderExtended) SQLScanArgs(opts core.Opts) []interface{} {
	args := make([]interface{}, 0, 64) // TODO: pre-calculate length
	m.Order = new(orderingmodel.Order)
	args = append(args, m.Order.SQLScanArgs(opts)...)
	m.Fulfillment = new(shippingmodel.Fulfillment)
	args = append(args, m.Fulfillment.SQLScanArgs(opts)...)
	return args
}
