// Code generated by generator cq. DO NOT EDIT.

// +build !generator

package vtpay

import (
	context "context"

	meta "etop.vn/api/meta"
)

type Command interface{ command() }
type Query interface{ query() }
type CommandBus struct{ bus meta.Bus }
type QueryBus struct{ bus meta.Bus }

func (c CommandBus) Dispatch(ctx context.Context, msg Command) error {
	return c.bus.Dispatch(ctx, msg)
}
func (c QueryBus) Dispatch(ctx context.Context, msg Query) error {
	return c.bus.Dispatch(ctx, msg)
}
func (c CommandBus) DispatchAll(ctx context.Context, msgs ...Command) error {
	for _, msg := range msgs {
		if err := c.bus.Dispatch(ctx, msg); err != nil {
			return err
		}
	}
	return nil
}
func (c QueryBus) DispatchAll(ctx context.Context, msgs ...Query) error {
	for _, msg := range msgs {
		if err := c.bus.Dispatch(ctx, msg); err != nil {
			return err
		}
	}
	return nil
}

type HandleExternalDataResponseCommand struct {
	BillCode        string `json:"bill_code"`
	CustMsisdn      string `json:"cust_msisdn"`
	ErrorCode       string `json:"error_code"`
	MerchantCode    string `json:"merchant_code"`
	OrderID         string `json:"order_id"`
	PaymentStatus   string `json:"payment_status"`
	TransAmount     int    `json:"trans_amount"`
	VtTransactionID string `json:"vt_transaction_id"`
	CheckSum        string `json:"check_sum"`

	Result struct {
	} `json:"-"`
}

func (h AggregateHandler) HandleHandleExternalDataResponse(ctx context.Context, msg *HandleExternalDataResponseCommand) (err error) {
	return h.inner.HandleExternalDataResponse(msg.GetArgs(ctx))
}

// implement interfaces

func (q *HandleExternalDataResponseCommand) command() {}

// implement conversion

func (q *HandleExternalDataResponseCommand) GetArgs(ctx context.Context) (_ context.Context, _ *HandleExternalDataResponseArgs) {
	return ctx,
		&HandleExternalDataResponseArgs{
			BillCode:        q.BillCode,
			CustMsisdn:      q.CustMsisdn,
			ErrorCode:       q.ErrorCode,
			MerchantCode:    q.MerchantCode,
			OrderID:         q.OrderID,
			PaymentStatus:   q.PaymentStatus,
			TransAmount:     q.TransAmount,
			VtTransactionID: q.VtTransactionID,
			CheckSum:        q.CheckSum,
		}
}

// implement dispatching

type AggregateHandler struct {
	inner Aggregate
}

func NewAggregateHandler(service Aggregate) AggregateHandler { return AggregateHandler{service} }

func (h AggregateHandler) RegisterHandlers(b interface {
	meta.Bus
	AddHandler(handler interface{})
}) CommandBus {
	b.AddHandler(h.HandleHandleExternalDataResponse)
	return CommandBus{b}
}
