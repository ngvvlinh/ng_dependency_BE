// +build !generator

// Code generated by generator api. DO NOT EDIT.

package shipping

import (
	context "context"

	orderingtypes "etop.vn/api/main/ordering/types"
	shippingtypes "etop.vn/api/main/shipping/types"
	try_on "etop.vn/api/top/types/etc/try_on"
	capi "etop.vn/capi"
	dot "etop.vn/capi/dot"
)

type CommandBus struct{ bus capi.Bus }

func NewCommandBus(bus capi.Bus) CommandBus { return CommandBus{bus} }

func (b CommandBus) Dispatch(ctx context.Context, msg interface{ command() }) error {
	return b.bus.Dispatch(ctx, msg)
}

type CreateFulfillmentsCommand struct {
	ShopID              dot.ID
	OrderID             dot.ID
	PickupAddress       *orderingtypes.Address
	ShippingAddress     *orderingtypes.Address
	ReturnAddress       *orderingtypes.Address
	ShippingType        orderingtypes.ShippingType
	ShippingServiceCode string
	ShippingServiceFee  int
	ShippingServiceName string
	WeightInfo          shippingtypes.WeightInfo
	ValueInfo           shippingtypes.ValueInfo
	TryOn               try_on.TryOnCode
	ShippingNote        string
	ConnectionID        dot.ID
	ShopCarrierID       dot.ID

	Result []dot.ID `json:"-"`
}

func (h AggregateHandler) HandleCreateFulfillments(ctx context.Context, msg *CreateFulfillmentsCommand) (err error) {
	msg.Result, err = h.inner.CreateFulfillments(msg.GetArgs(ctx))
	return err
}

// implement interfaces

func (q *CreateFulfillmentsCommand) command() {}

// implement conversion

func (q *CreateFulfillmentsCommand) GetArgs(ctx context.Context) (_ context.Context, _ *CreateFulfillmentsArgs) {
	return ctx,
		&CreateFulfillmentsArgs{
			ShopID:              q.ShopID,
			OrderID:             q.OrderID,
			PickupAddress:       q.PickupAddress,
			ShippingAddress:     q.ShippingAddress,
			ReturnAddress:       q.ReturnAddress,
			ShippingType:        q.ShippingType,
			ShippingServiceCode: q.ShippingServiceCode,
			ShippingServiceFee:  q.ShippingServiceFee,
			ShippingServiceName: q.ShippingServiceName,
			WeightInfo:          q.WeightInfo,
			ValueInfo:           q.ValueInfo,
			TryOn:               q.TryOn,
			ShippingNote:        q.ShippingNote,
			ConnectionID:        q.ConnectionID,
			ShopCarrierID:       q.ShopCarrierID,
		}
}

func (q *CreateFulfillmentsCommand) SetCreateFulfillmentsArgs(args *CreateFulfillmentsArgs) {
	q.ShopID = args.ShopID
	q.OrderID = args.OrderID
	q.PickupAddress = args.PickupAddress
	q.ShippingAddress = args.ShippingAddress
	q.ReturnAddress = args.ReturnAddress
	q.ShippingType = args.ShippingType
	q.ShippingServiceCode = args.ShippingServiceCode
	q.ShippingServiceFee = args.ShippingServiceFee
	q.ShippingServiceName = args.ShippingServiceName
	q.WeightInfo = args.WeightInfo
	q.ValueInfo = args.ValueInfo
	q.TryOn = args.TryOn
	q.ShippingNote = args.ShippingNote
	q.ConnectionID = args.ConnectionID
	q.ShopCarrierID = args.ShopCarrierID
}

// implement dispatching

type AggregateHandler struct {
	inner Aggregate
}

func NewAggregateHandler(service Aggregate) AggregateHandler { return AggregateHandler{service} }

func (h AggregateHandler) RegisterHandlers(b interface {
	capi.Bus
	AddHandler(handler interface{})
}) CommandBus {
	b.AddHandler(h.HandleCreateFulfillments)
	return CommandBus{b}
}
