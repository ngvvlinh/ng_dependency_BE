// Code generated by gen-cmd-query. DO NOT EDIT.

package shipnow

import (
	context "context"
	time "time"

	etop "etop.vn/api/main/etop"
	types1 "etop.vn/api/main/ordering/types"
	types "etop.vn/api/main/shipnow/carrier/types"
	types2 "etop.vn/api/main/shipnow/types"
	types3 "etop.vn/api/main/shipping/types"
	meta "etop.vn/api/meta"
)

type Command interface{ command() }
type Query interface{ query() }
type CommandBus struct{ bus meta.Bus }
type QueryBus struct{ bus meta.Bus }

func (c CommandBus) Dispatch(ctx context.Context, msg Command) error {
	return c.bus.Dispatch(ctx, msg)
}
func (c QueryBus) Dispatch(ctx context.Context, msg Query) error {
	return c.bus.Dispatch(ctx, msg)
}
func (c CommandBus) DispatchAll(ctx context.Context, msgs ...Command) error {
	for _, msg := range msgs {
		if err := c.bus.Dispatch(ctx, msg); err != nil {
			return err
		}
	}
	return nil
}
func (c QueryBus) DispatchAll(ctx context.Context, msgs ...Query) error {
	for _, msg := range msgs {
		if err := c.bus.Dispatch(ctx, msg); err != nil {
			return err
		}
	}
	return nil
}

type CancelShipnowFulfillmentCommand struct {
	Id           int64  `json:"id"`
	ShopId       int64  `json:"shop_id"`
	CancelReason string `json:"cancel_reason"`

	Result *meta.Empty `json:"-"`
}

type ConfirmShipnowFulfillmentCommand struct {
	Id     int64 `json:"id"`
	ShopId int64 `json:"shop_id"`

	Result *ShipnowFulfillment `json:"-"`
}

type CreateShipnowFulfillmentCommand struct {
	OrderIds            []int64         `json:"order_ids,omitempty"`
	Carrier             types.Carrier   `json:"carrier"`
	ShopId              int64           `json:"shop_id"`
	ShippingServiceCode string          `json:"shipping_service_code"`
	ShippingServiceFee  int32           `json:"shipping_service_fee"`
	ShippingNote        string          `json:"shipping_note"`
	RequestPickupAt     time.Time       `json:"request_pickup_at,omitempty"`
	PickupAddress       *types1.Address `json:"pickup_address,omitempty"`

	Result *ShipnowFulfillment `json:"-"`
}

type GetShipnowServicesCommand struct {
	ShopId         int64            `json:"shop_id"`
	OrderIds       []int64          `json:"order_ids,omitempty"`
	PickupAddress  *types1.Address  `json:"pickup_address,omitempty"`
	DeliveryPoints []*DeliveryPoint `json:"delivery_points,omitempty"`

	Result *GetShipnowServicesResult `json:"-"`
}

type UpdateShipnowFulfillmentCommand struct {
	Id                  int64           `json:"id"`
	OrderIds            []int64         `json:"order_ids,omitempty"`
	Carrier             types.Carrier   `json:"carrier"`
	ShopId              int64           `json:"shop_id"`
	ShippingServiceCode string          `json:"shipping_service_code"`
	ShippingServiceFee  int32           `json:"shipping_service_fee"`
	ShippingNote        string          `json:"shipping_note"`
	RequestPickupAt     time.Time       `json:"request_pickup_at,omitempty"`
	PickupAddress       *types1.Address `json:"pickup_address,omitempty"`

	Result *ShipnowFulfillment `json:"-"`
}

type UpdateShipnowFulfillmentCarrierInfoCommand struct {
	Id                         int64             `json:"id"`
	ShippingCode               string            `json:"shipping_code"`
	ShippingState              types2.State      `json:"shipping_state"`
	TotalFee                   int32             `json:"total_fee"`
	FeeLines                   []*types3.FeeLine `json:"fee_lines,omitempty"`
	CarrierFeeLines            []*types3.FeeLine `json:"carrier_fee_lines,omitempty"`
	ShippingCreatedAt          time.Time         `json:"shipping_created_at,omitempty"`
	EtopPaymentStatus          etop.Status4      `json:"etop_payment_status"`
	ShippingStatus             etop.Status5      `json:"shipping_status"`
	Status                     etop.Status5      `json:"status"`
	CodEtopTransferedAt        time.Time         `json:"cod_etop_transfered_at,omitempty"`
	ShippingPickingAt          time.Time         `json:"shipping_picking_at,omitempty"`
	ShippingDeliveringAt       time.Time         `json:"shipping_delivering_at,omitempty"`
	ShippingDeliveredAt        time.Time         `json:"shipping_delivered_at,omitempty"`
	ShippingCancelledAt        time.Time         `json:"shipping_cancelled_at,omitempty"`
	ShippingServiceName        string            `json:"shipping_service_name"`
	CancelReason               string            `json:"cancel_reason"`
	ShippingSharedLink         string            `json:"shipping_shared_link"`
	ShippingServiceDescription string            `json:"shipping_service_description"`

	Result *ShipnowFulfillment `json:"-"`
}

type UpdateShipnowFulfillmentStateCommand struct {
	Id             int64        `json:"id"`
	SyncStatus     etop.Status4 `json:"sync_status"`
	Status         etop.Status5 `json:"status"`
	ConfirmStatus  etop.Status3 `json:"confirm_status"`
	ShippingStatus etop.Status5 `json:"shipping_status"`
	SyncStates     *SyncStates  `json:"sync_states,omitempty"`
	ShippingState  types2.State `json:"shipping_state"`

	Result *ShipnowFulfillment `json:"-"`
}

type GetShipnowFulfillmentQuery struct {
	Id     int64 `json:"id"`
	ShopId int64 `json:"shop_id"`

	Result *GetShipnowFulfillmentQueryResult `json:"-"`
}

type GetShipnowFulfillmentByShippingCodeQuery struct {
	ShippingCode string `json:"shipping_code"`

	Result *GetShipnowFulfillmentQueryResult `json:"-"`
}

type GetShipnowFulfillmentsQuery struct {
	ShopIds []int64        `json:"shop_ids,omitempty"`
	Paging  *meta.Paging   `json:"paging,omitempty"`
	Filters []*meta.Filter `json:"filters,omitempty"`

	Result *GetShipnowFulfillmentsQueryResult `json:"-"`
}

// implement interfaces

func (q *CancelShipnowFulfillmentCommand) command()            {}
func (q *ConfirmShipnowFulfillmentCommand) command()           {}
func (q *CreateShipnowFulfillmentCommand) command()            {}
func (q *GetShipnowServicesCommand) command()                  {}
func (q *UpdateShipnowFulfillmentCommand) command()            {}
func (q *UpdateShipnowFulfillmentCarrierInfoCommand) command() {}
func (q *UpdateShipnowFulfillmentStateCommand) command()       {}
func (q *GetShipnowFulfillmentQuery) query()                   {}
func (q *GetShipnowFulfillmentByShippingCodeQuery) query()     {}
func (q *GetShipnowFulfillmentsQuery) query()                  {}

// implement conversion

func (q *CancelShipnowFulfillmentCommand) GetArgs(ctx context.Context) (_ context.Context, _ *CancelShipnowFulfillmentArgs) {
	return ctx,
		&CancelShipnowFulfillmentArgs{
			Id:           q.Id,
			ShopId:       q.ShopId,
			CancelReason: q.CancelReason,
		}
}

func (q *ConfirmShipnowFulfillmentCommand) GetArgs(ctx context.Context) (_ context.Context, _ *ConfirmShipnowFulfillmentArgs) {
	return ctx,
		&ConfirmShipnowFulfillmentArgs{
			Id:     q.Id,
			ShopId: q.ShopId,
		}
}

func (q *CreateShipnowFulfillmentCommand) GetArgs(ctx context.Context) (_ context.Context, _ *CreateShipnowFulfillmentArgs) {
	return ctx,
		&CreateShipnowFulfillmentArgs{
			OrderIds:            q.OrderIds,
			Carrier:             q.Carrier,
			ShopId:              q.ShopId,
			ShippingServiceCode: q.ShippingServiceCode,
			ShippingServiceFee:  q.ShippingServiceFee,
			ShippingNote:        q.ShippingNote,
			RequestPickupAt:     q.RequestPickupAt,
			PickupAddress:       q.PickupAddress,
		}
}

func (q *GetShipnowServicesCommand) GetArgs(ctx context.Context) (_ context.Context, _ *GetShipnowServicesArgs) {
	return ctx,
		&GetShipnowServicesArgs{
			ShopId:         q.ShopId,
			OrderIds:       q.OrderIds,
			PickupAddress:  q.PickupAddress,
			DeliveryPoints: q.DeliveryPoints,
		}
}

func (q *UpdateShipnowFulfillmentCommand) GetArgs(ctx context.Context) (_ context.Context, _ *UpdateShipnowFulfillmentArgs) {
	return ctx,
		&UpdateShipnowFulfillmentArgs{
			Id:                  q.Id,
			OrderIds:            q.OrderIds,
			Carrier:             q.Carrier,
			ShopId:              q.ShopId,
			ShippingServiceCode: q.ShippingServiceCode,
			ShippingServiceFee:  q.ShippingServiceFee,
			ShippingNote:        q.ShippingNote,
			RequestPickupAt:     q.RequestPickupAt,
			PickupAddress:       q.PickupAddress,
		}
}

func (q *UpdateShipnowFulfillmentCarrierInfoCommand) GetArgs(ctx context.Context) (_ context.Context, _ *UpdateShipnowFulfillmentCarrierInfoArgs) {
	return ctx,
		&UpdateShipnowFulfillmentCarrierInfoArgs{
			Id:                         q.Id,
			ShippingCode:               q.ShippingCode,
			ShippingState:              q.ShippingState,
			TotalFee:                   q.TotalFee,
			FeeLines:                   q.FeeLines,
			CarrierFeeLines:            q.CarrierFeeLines,
			ShippingCreatedAt:          q.ShippingCreatedAt,
			EtopPaymentStatus:          q.EtopPaymentStatus,
			ShippingStatus:             q.ShippingStatus,
			Status:                     q.Status,
			CodEtopTransferedAt:        q.CodEtopTransferedAt,
			ShippingPickingAt:          q.ShippingPickingAt,
			ShippingDeliveringAt:       q.ShippingDeliveringAt,
			ShippingDeliveredAt:        q.ShippingDeliveredAt,
			ShippingCancelledAt:        q.ShippingCancelledAt,
			ShippingServiceName:        q.ShippingServiceName,
			CancelReason:               q.CancelReason,
			ShippingSharedLink:         q.ShippingSharedLink,
			ShippingServiceDescription: q.ShippingServiceDescription,
		}
}

func (q *UpdateShipnowFulfillmentStateCommand) GetArgs(ctx context.Context) (_ context.Context, _ *UpdateShipnowFulfillmentStateArgs) {
	return ctx,
		&UpdateShipnowFulfillmentStateArgs{
			Id:             q.Id,
			SyncStatus:     q.SyncStatus,
			Status:         q.Status,
			ConfirmStatus:  q.ConfirmStatus,
			ShippingStatus: q.ShippingStatus,
			SyncStates:     q.SyncStates,
			ShippingState:  q.ShippingState,
		}
}

func (q *GetShipnowFulfillmentQuery) GetArgs(ctx context.Context) (_ context.Context, _ *GetShipnowFulfillmentQueryArgs) {
	return ctx,
		&GetShipnowFulfillmentQueryArgs{
			Id:     q.Id,
			ShopId: q.ShopId,
		}
}

func (q *GetShipnowFulfillmentByShippingCodeQuery) GetArgs(ctx context.Context) (_ context.Context, _ *GetShipnowFulfillmentByShippingCodeQueryArgs) {
	return ctx,
		&GetShipnowFulfillmentByShippingCodeQueryArgs{
			ShippingCode: q.ShippingCode,
		}
}

func (q *GetShipnowFulfillmentsQuery) GetArgs(ctx context.Context) (_ context.Context, _ *GetShipnowFulfillmentsQueryArgs) {
	return ctx,
		&GetShipnowFulfillmentsQueryArgs{
			ShopIds: q.ShopIds,
			Paging:  q.Paging,
			Filters: q.Filters,
		}
}

// implement dispatching

type AggregateHandler struct {
	inner Aggregate
}

func NewAggregateHandler(service Aggregate) AggregateHandler { return AggregateHandler{service} }

func (h AggregateHandler) RegisterHandlers(b interface {
	meta.Bus
	AddHandler(handler interface{})
}) CommandBus {
	b.AddHandler(h.HandleCancelShipnowFulfillment)
	b.AddHandler(h.HandleConfirmShipnowFulfillment)
	b.AddHandler(h.HandleCreateShipnowFulfillment)
	b.AddHandler(h.HandleGetShipnowServices)
	b.AddHandler(h.HandleUpdateShipnowFulfillment)
	b.AddHandler(h.HandleUpdateShipnowFulfillmentCarrierInfo)
	b.AddHandler(h.HandleUpdateShipnowFulfillmentState)
	return CommandBus{b}
}

func (h AggregateHandler) HandleCancelShipnowFulfillment(ctx context.Context, msg *CancelShipnowFulfillmentCommand) error {
	result, err := h.inner.CancelShipnowFulfillment(msg.GetArgs(ctx))
	msg.Result = result
	return err
}

func (h AggregateHandler) HandleConfirmShipnowFulfillment(ctx context.Context, msg *ConfirmShipnowFulfillmentCommand) error {
	result, err := h.inner.ConfirmShipnowFulfillment(msg.GetArgs(ctx))
	msg.Result = result
	return err
}

func (h AggregateHandler) HandleCreateShipnowFulfillment(ctx context.Context, msg *CreateShipnowFulfillmentCommand) error {
	result, err := h.inner.CreateShipnowFulfillment(msg.GetArgs(ctx))
	msg.Result = result
	return err
}

func (h AggregateHandler) HandleGetShipnowServices(ctx context.Context, msg *GetShipnowServicesCommand) error {
	result, err := h.inner.GetShipnowServices(msg.GetArgs(ctx))
	msg.Result = result
	return err
}

func (h AggregateHandler) HandleUpdateShipnowFulfillment(ctx context.Context, msg *UpdateShipnowFulfillmentCommand) error {
	result, err := h.inner.UpdateShipnowFulfillment(msg.GetArgs(ctx))
	msg.Result = result
	return err
}

func (h AggregateHandler) HandleUpdateShipnowFulfillmentCarrierInfo(ctx context.Context, msg *UpdateShipnowFulfillmentCarrierInfoCommand) error {
	result, err := h.inner.UpdateShipnowFulfillmentCarrierInfo(msg.GetArgs(ctx))
	msg.Result = result
	return err
}

func (h AggregateHandler) HandleUpdateShipnowFulfillmentState(ctx context.Context, msg *UpdateShipnowFulfillmentStateCommand) error {
	result, err := h.inner.UpdateShipnowFulfillmentState(msg.GetArgs(ctx))
	msg.Result = result
	return err
}

type QueryServiceHandler struct {
	inner QueryService
}

func NewQueryServiceHandler(service QueryService) QueryServiceHandler {
	return QueryServiceHandler{service}
}

func (h QueryServiceHandler) RegisterHandlers(b interface {
	meta.Bus
	AddHandler(handler interface{})
}) QueryBus {
	b.AddHandler(h.HandleGetShipnowFulfillment)
	b.AddHandler(h.HandleGetShipnowFulfillmentByShippingCode)
	b.AddHandler(h.HandleGetShipnowFulfillments)
	return QueryBus{b}
}

func (h QueryServiceHandler) HandleGetShipnowFulfillment(ctx context.Context, msg *GetShipnowFulfillmentQuery) error {
	result, err := h.inner.GetShipnowFulfillment(msg.GetArgs(ctx))
	msg.Result = result
	return err
}

func (h QueryServiceHandler) HandleGetShipnowFulfillmentByShippingCode(ctx context.Context, msg *GetShipnowFulfillmentByShippingCodeQuery) error {
	result, err := h.inner.GetShipnowFulfillmentByShippingCode(msg.GetArgs(ctx))
	msg.Result = result
	return err
}

func (h QueryServiceHandler) HandleGetShipnowFulfillments(ctx context.Context, msg *GetShipnowFulfillmentsQuery) error {
	result, err := h.inner.GetShipnowFulfillments(msg.GetArgs(ctx))
	msg.Result = result
	return err
}
