{
  "swagger": "2.0",
  "info": {
    "title": "eTop API: Affiliate service",
    "version": "v1"
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/affiliate.Affiliate/AffiliateGetProducts": {
      "post": {
        "operationId": "AffiliateGetProducts",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateAffiliateGetProductsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/cmCommonListRequest"
            }
          }
        ],
        "tags": [
          "Affiliate"
        ]
      }
    },
    "/api/affiliate.Affiliate/CreateOrUpdateAffiliateCommissionSetting": {
      "post": {
        "operationId": "CreateOrUpdateAffiliateCommissionSetting",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateCommissionSetting"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/affiliateCreateOrUpdateCommissionSettingRequest"
            }
          }
        ],
        "tags": [
          "Affiliate"
        ]
      }
    },
    "/api/affiliate.Affiliate/GetCommissions": {
      "post": {
        "operationId": "GetCommissions",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateGetCommissionsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/cmCommonListRequest"
            }
          }
        ],
        "tags": [
          "Affiliate"
        ]
      }
    },
    "/api/affiliate.Affiliate/GetProductPromotionByProductID": {
      "post": {
        "operationId": "GetProductPromotionByProductID",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateGetProductPromotionByProductIDResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/affiliateGetProductPromotionByProductIDRequest"
            }
          }
        ],
        "tags": [
          "Affiliate"
        ]
      }
    },
    "/api/affiliate.Affiliate/GetTransactions": {
      "post": {
        "operationId": "GetTransactions",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateGetTransactionsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/cmCommonListRequest"
            }
          }
        ],
        "tags": [
          "Affiliate"
        ]
      }
    },
    "/api/affiliate.Affiliate/NotifyNewShopPurchase": {
      "post": {
        "operationId": "NotifyNewShopPurchase",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateNotifyNewShopPurchaseResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/affiliateNotifyNewShopPurchaseRequest"
            }
          }
        ],
        "tags": [
          "Affiliate"
        ]
      }
    },
    "/api/affiliate.Shop/GetProductPromotion": {
      "post": {
        "operationId": "GetProductPromotion",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateGetProductPromotionResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/affiliateGetProductPromotionRequest"
            }
          }
        ],
        "tags": [
          "Shop"
        ]
      }
    },
    "/api/affiliate.Trading/CreateOrUpdateTradingCommissionSetting": {
      "post": {
        "operationId": "CreateOrUpdateTradingCommissionSetting",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateCommissionSetting"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/affiliateCreateOrUpdateCommissionSettingRequest"
            }
          }
        ],
        "tags": [
          "Trading"
        ]
      }
    },
    "/api/affiliate.Trading/CreateProductPromotion": {
      "post": {
        "operationId": "CreateProductPromotion",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateProductPromotion"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/affiliateCreateOrUpdateProductPromotionRequest"
            }
          }
        ],
        "tags": [
          "Trading"
        ]
      }
    },
    "/api/affiliate.Trading/GetProductPromotions": {
      "post": {
        "operationId": "GetProductPromotions",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateGetProductPromotionsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/cmCommonListRequest"
            }
          }
        ],
        "tags": [
          "Trading"
        ]
      }
    },
    "/api/affiliate.Trading/TradingGetProducts": {
      "post": {
        "operationId": "TradingGetProducts",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateShopGetProductsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/cmCommonListRequest"
            }
          }
        ],
        "tags": [
          "Trading"
        ]
      }
    },
    "/api/affiliate.Trading/UpdateProductPromotion": {
      "post": {
        "operationId": "UpdateProductPromotion",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/affiliateProductPromotion"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/affiliateCreateOrUpdateProductPromotionRequest"
            }
          }
        ],
        "tags": [
          "Trading"
        ]
      }
    }
  },
  "definitions": {
    "affiliateAffiliateGetProductsResponse": {
      "type": "object",
      "properties": {
        "paging": {
          "$ref": "#/definitions/cmPageInfo"
        },
        "products": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/affiliateAffiliateProductResponse"
          }
        }
      }
    },
    "affiliateAffiliateProductResponse": {
      "type": "object",
      "properties": {
        "product": {
          "$ref": "#/definitions/shopShopProduct"
        },
        "shop_commission_setting": {
          "$ref": "#/definitions/affiliateCommissionSetting"
        },
        "affiliate_commission_setting": {
          "$ref": "#/definitions/affiliateCommissionSetting"
        }
      }
    },
    "affiliateCommissionSetting": {
      "type": "object",
      "properties": {
        "product_id": {
          "type": "string",
          "format": "int64"
        },
        "amount": {
          "type": "integer",
          "format": "int32"
        },
        "unit": {
          "type": "string"
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "affiliateCreateOrUpdateCommissionSettingRequest": {
      "type": "object",
      "properties": {
        "product_id": {
          "type": "string",
          "format": "int64"
        },
        "amount": {
          "type": "integer",
          "format": "int32"
        },
        "unit": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      }
    },
    "affiliateCreateOrUpdateProductPromotionRequest": {
      "type": "object"
    },
    "affiliateGetCommissionsResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        }
      }
    },
    "affiliateGetProductPromotionByProductIDRequest": {
      "type": "object"
    },
    "affiliateGetProductPromotionByProductIDResponse": {
      "type": "object"
    },
    "affiliateGetProductPromotionRequest": {
      "type": "object",
      "properties": {
        "product_id": {
          "type": "string",
          "format": "int64"
        },
        "referral_code": {
          "type": "string",
          "format": "int64"
        }
      }
    },
    "affiliateGetProductPromotionResponse": {
      "type": "object",
      "properties": {
        "promotion": {
          "$ref": "#/definitions/affiliateProductPromotion"
        },
        "referral_discount": {
          "$ref": "#/definitions/affiliateCommissionSetting"
        }
      }
    },
    "affiliateGetProductPromotionsResponse": {
      "type": "object",
      "properties": {
        "paging": {
          "$ref": "#/definitions/cmPageInfo"
        },
        "promotions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/affiliateProductPromotion"
          }
        }
      }
    },
    "affiliateGetTransactionsResponse": {
      "type": "object",
      "properties": {
        "transactions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/affiliateTransaction"
          }
        }
      }
    },
    "affiliateNotifyNewShopPurchaseRequest": {
      "type": "object",
      "properties": {
        "order_id": {
          "type": "string",
          "format": "int64"
        }
      }
    },
    "affiliateNotifyNewShopPurchaseResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        }
      }
    },
    "affiliateProductPromotion": {
      "type": "object",
      "properties": {
        "product": {
          "$ref": "#/definitions/shopShopProduct"
        },
        "id": {
          "type": "string",
          "format": "int64"
        },
        "product_id": {
          "type": "string",
          "format": "int64"
        },
        "amount": {
          "type": "integer",
          "format": "int32"
        },
        "unit": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      }
    },
    "affiliateShopGetProductsResponse": {
      "type": "object",
      "properties": {
        "paging": {
          "$ref": "#/definitions/cmPageInfo"
        },
        "products": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/affiliateShopProductResponse"
          }
        }
      }
    },
    "affiliateShopProductResponse": {
      "type": "object",
      "properties": {
        "product": {
          "$ref": "#/definitions/shopShopProduct"
        },
        "shop_commission_setting": {
          "$ref": "#/definitions/affiliateCommissionSetting"
        }
      }
    },
    "affiliateTransaction": {
      "type": "object"
    },
    "cmCommonListRequest": {
      "type": "object",
      "properties": {
        "paging": {
          "$ref": "#/definitions/cmPaging"
        },
        "filters": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/cmFilter"
          }
        }
      }
    },
    "cmFilter": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Comma separated properties: \"name,s_name\""
        },
        "op": {
          "type": "string",
          "description": "- Text or set: ⊃ ∩\n- Exactly: = ≠ ∈\n- Numeric: = ≠ ∈ < ≤ > ≥",
          "title": "Can be = ≠ (!=) < ≤ (<=) > ≥ (>=) ⊃ (c) ∈ (in) ∩ (n)"
        },
        "value": {
          "type": "string",
          "title": "Must always be string"
        }
      }
    },
    "cmPageInfo": {
      "type": "object",
      "properties": {
        "total": {
          "type": "integer",
          "format": "int32"
        },
        "limit": {
          "type": "integer",
          "format": "int32"
        },
        "sort": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "cmPaging": {
      "type": "object",
      "properties": {
        "offset": {
          "type": "integer",
          "format": "int32"
        },
        "limit": {
          "type": "integer",
          "format": "int32"
        },
        "sort": {
          "type": "string"
        }
      }
    },
    "shopAttribute": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      }
    },
    "shopEtopProduct": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64"
        },
        "code": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "short_desc": {
          "type": "string"
        },
        "desc_html": {
          "type": "string"
        },
        "unit": {
          "type": "string"
        },
        "image_urls": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "list_price": {
          "type": "integer",
          "format": "int32"
        },
        "cost_price": {
          "type": "integer",
          "format": "int32"
        },
        "category_id": {
          "type": "string",
          "format": "int64"
        },
        "product_source_category_id": {
          "type": "string",
          "format": "int64",
          "title": "@deprecated"
        }
      }
    },
    "shopEtopVariant": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64"
        },
        "code": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "short_desc": {
          "type": "string"
        },
        "desc_html": {
          "type": "string"
        },
        "image_urls": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "list_price": {
          "type": "integer",
          "format": "int32"
        },
        "cost_price": {
          "type": "integer",
          "format": "int32"
        },
        "attributes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/shopAttribute"
          }
        }
      }
    },
    "shopShopProduct": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64"
        },
        "info": {
          "$ref": "#/definitions/shopEtopProduct"
        },
        "code": {
          "type": "string"
        },
        "ed_code": {
          "type": "string",
          "title": "@deprecated use code instead"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "short_desc": {
          "type": "string"
        },
        "desc_html": {
          "type": "string"
        },
        "image_urls": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "@deprecated use stags instead"
        },
        "stags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/shopTag"
          }
        },
        "note": {
          "type": "string"
        },
        "status": {
          "$ref": "#/definitions/status3Status"
        },
        "is_available": {
          "type": "boolean",
          "format": "boolean"
        },
        "list_price": {
          "type": "integer",
          "format": "int32"
        },
        "retail_price": {
          "type": "integer",
          "format": "int32"
        },
        "cost_price": {
          "type": "integer",
          "format": "int32"
        },
        "collection_ids": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          }
        },
        "variants": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/shopShopVariant"
          }
        },
        "product_source_id": {
          "type": "string",
          "format": "int64"
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "id"
      ]
    },
    "shopShopVariant": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64"
        },
        "info": {
          "$ref": "#/definitions/shopEtopVariant"
        },
        "code": {
          "type": "string"
        },
        "ed_code": {
          "type": "string",
          "title": "@deprecated use code instead"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "short_desc": {
          "type": "string"
        },
        "desc_html": {
          "type": "string"
        },
        "image_urls": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "list_price": {
          "type": "integer",
          "format": "int32"
        },
        "retail_price": {
          "type": "integer",
          "format": "int32"
        },
        "cost_price": {
          "type": "integer",
          "format": "int32"
        },
        "note": {
          "type": "string"
        },
        "status": {
          "$ref": "#/definitions/status3Status"
        },
        "is_available": {
          "type": "boolean",
          "format": "boolean"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "@deprecated use stags instead"
        },
        "stags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/shopTag"
          }
        },
        "attributes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/shopAttribute"
          }
        }
      },
      "required": [
        "id"
      ]
    },
    "shopTag": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64"
        },
        "label": {
          "type": "string"
        }
      }
    },
    "status3Status": {
      "type": "string",
      "enum": [
        "Z",
        "P",
        "N"
      ],
      "default": "Z"
    }
  },
  "tags": [
    {
      "name": "Affiliate"
    },
    {
      "name": "Shop"
    },
    {
      "name": "Trading"
    }
  ]
}
